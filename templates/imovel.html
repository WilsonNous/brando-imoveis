{% extends "base.html" %}

{% block title %}{{ imovel.tipo }} - {{ imovel.bairro }} | Brando Imóveis{% endblock %}

{% block content %}
<main class="max-w-6xl mx-auto p-6 grid md:grid-cols-2 gap-6">

  <!-- IMAGEM PRINCIPAL -->
  <div>
    <img src="{{ imovel.imagem or 'https://picsum.photos/900/700?blur=1' }}" 
         class="w-full rounded-xl shadow-lg object-cover"
         alt="Imagem principal do imóvel {{ imovel.codigo }}">
  </div>

  <!-- DETALHES DO IMÓVEL -->
  <div>
    <h2 class="text-2xl font-bold text-[color:var(--brand-blue)] mb-1">
      {{ imovel.tipo }} - {{ imovel.bairro }}
    </h2>
    <p class="text-2xl price mb-3 font-semibold text-gray-800">
      R$ {{ '{:,.2f}'.format(imovel.valor) }}
    </p>

    <p class="text-gray-700 leading-relaxed mb-5">{{ imovel.descricao }}</p>

    <a href="/" class="inline-block mb-4 text-[color:var(--brand-blue)] underline hover:opacity-80">
      ← Voltar à listagem
    </a>

    <!-- FORMULÁRIO DE LEAD -->
    <form action="/lead" method="POST" 
          class="bg-white border border-gray-200 rounded-xl p-4 shadow-sm">
      <input type="hidden" name="imovel_id" value="{{ imovel.id }}">
      <div class="grid grid-cols-1 gap-3">
        <input name="nome" placeholder="Seu nome" required 
               class="field" />
        <input name="telefone" placeholder="WhatsApp" required 
               class="field" />
        <textarea name="mensagem" placeholder="Mensagem (opcional)" class="field h-24"></textarea>
        <button class="btn-brand w-full font-semibold">Falar no WhatsApp</button>
      </div>
    </form>
  </div>

</main>
{% endblock %}
