<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Brando ImÃ³veis{% endblock %}</title>

  <meta name="description" content="Brando ImÃ³veis | CRECI 61150 | Rua Intendente AntÃ´nio Damasco, 2330 - Ratones / FlorianÃ³polis. Encontre casas, apartamentos e imÃ³veis com propÃ³sito." />
  <meta name="author" content="Brando ImÃ³veis - CRECI 61150 | Desenvolvido por Nous Tecnologia" />

  <!-- Tailwind + CSS principal -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="/static/css/main.css" rel="stylesheet" />

  {% block extra_head %}{% endblock %}
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- ===================================================== -->
  <!-- HEADER GLOBAL -->
  <!-- ===================================================== -->
  <header class="text-white shadow bg-[color:var(--brand-blue)]">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center p-4 gap-2 md:gap-0">
      <div class="flex items-center gap-3">
        <img src="/static/img/brando_logo.png" alt="Brando ImÃ³veis" class="h-10">
        <h1 class="text-2xl font-bold tracking-wide flex flex-col md:flex-row md:items-center gap-1">
          Brando ImÃ³veis
          <span class="text-sm font-normal opacity-90 md:ml-2">| CRECI 61150</span>
        </h1>
      </div>
      <nav class="flex flex-wrap justify-center md:justify-end gap-2">
        <a href="/" class="btn-admin">InÃ­cio</a>
        <a href="/temporada" class="btn-admin">Temporada ğŸŒ´</a>
        <a href="/servicos" class="btn-admin">ServiÃ§os</a>
        <a href="/admin" class="btn-admin">Admin</a>
        <a href="https://instagram.com/brandoimoveisfloripa" target="_blank" class="btn-admin bg-pink-500 hover:bg-pink-600 transition">ğŸ“¸ Instagram</a>
        <a href="https://wa.me/554891054216" target="_blank" class="btn-whatsapp">ğŸ“± WhatsApp</a>
      </nav>
    </div>
  </header>

  <!-- ===================================================== -->
  <!-- CONTEÃšDO DAS PÃGINAS -->
  <!-- ===================================================== -->
  <main class="min-h-[70vh]">
    {% block content %}
    {% endblock %}
  </main>

  <!-- ===================================================== -->
  <!-- RODAPÃ‰ GLOBAL -->
  <!-- ===================================================== -->
  <footer class="text-white text-center py-6 mt-10 bg-[color:var(--brand-blue)]">
    <p class="text-sm mb-1">ğŸ“ Rua Intendente AntÃ´nio Damasco, 2330 - Ratones / FlorianÃ³polis</p>
    <p class="text-sm mb-1">
      ğŸ“ (48) 99105-4216 | (48) 98822-3344
    </p>
    <p class="text-sm italic mb-2">
      â€œConsagre ao Senhor tudo o que vocÃª faz, e os seus planos serÃ£o bem-sucedidos.â€<br>
      <span class="opacity-80">ProvÃ©rbios 16:3</span>
    </p>
    <p class="text-xs opacity-90">
      Â© 2025 Brando ImÃ³veis | CRECI 61150<br>
      Desenvolvido por <span class="font-semibold">Nous Tecnologia</span>
    </p>
  </footer>

  <!-- ===================================================== -->
  <!-- BRANDINHO (Assistente Virtual) -->
  <!-- ===================================================== -->
  <button id="brandinho-toggle">ğŸ’¬ Falar com o Brandinho</button>
  <div id="brandinho-box" aria-live="polite">
    <div id="brandinho-header">
      <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Brando" alt="Brandinho">
      <div>
        <div class="font-semibold">Brandinho</div>
        <div class="text-sm opacity-90">Assistente virtual da Brando ImÃ³veis</div>
      </div>
    </div>
    <div id="brandinho-messages"></div>
    <div id="brandinho-input">
      <input id="brandinho-text" placeholder="Ex.: apartamento atÃ© 600 mil em Canasvieiras" />
      <button id="brandinho-send">Enviar</button>
    </div>
  </div>

  <div class="toast"></div>
  <script src="/static/js/script.js"></script>
  <!-- ===================================================== -->
  <!-- MODAL FULLSCREEN DE GALERIA DE FOTOS -->
  <!-- ===================================================== -->
  <div id="fullscreen-modal"
       class="hidden fixed inset-0 bg-black/90 backdrop-blur-sm z-[99999] flex flex-col items-center justify-center">
  
    <!-- BotÃ£o fechar -->
    <button id="fs-close"
            class="absolute top-4 right-4 text-white text-3xl font-bold hover:opacity-80">
      âœ•
    </button>
  
    <!-- Imagem principal -->
    <img id="fs-image"
         src=""
         class="max-h-[80vh] max-w-[90vw] rounded-lg shadow-2xl object-contain transition-all duration-300">
  
    <!-- Thumbs -->
    <div id="fs-thumbs"
         class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 overflow-x-auto px-4 py-2">
  
    </div>
  
    <!-- BotÃµes NavegaÃ§Ã£o -->
    <button id="fs-prev"
            class="absolute left-4 text-white text-4xl font-bold hover:opacity-80 select-none">
      â€¹
    </button>
  
    <button id="fs-next"
            class="absolute right-4 text-white text-4xl font-bold hover:opacity-80 select-none">
      â€º
    </button>
  
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      
      const modal = document.getElementById("fullscreen-modal");
      const modalImg = document.getElementById("fs-image");
      const thumbsBox = document.getElementById("fs-thumbs");
      let images = [];
      let index = 0;
    
      // FunÃ§Ã£o abrir modal
      window.openFullscreen = function (imgs, startIndex = 0) {
        images = imgs;
        index = startIndex;
    
        modalImg.src = images[index];
        modal.classList.remove("hidden");
        document.body.style.overflow = "hidden";
    
        // Render thumbs
        thumbsBox.innerHTML = "";
        images.forEach((src, i) => {
          const t = document.createElement("img");
          t.src = src;
          t.className =
            "h-16 w-24 object-cover rounded-md cursor-pointer border-2 " +
            (i === index ? "border-white" : "border-transparent");
    
          t.addEventListener("click", () => {
            index = i;
            modalImg.src = images[index];
            renderThumbs();
          });
    
          thumbsBox.appendChild(t);
        });
      };
    
      function renderThumbs() {
        [...thumbsBox.children].forEach((t, i) => {
          t.classList.toggle("border-white", i === index);
          t.classList.toggle("border-transparent", i !== index);
        });
      }
    
      // NavegaÃ§Ã£o
      document.getElementById("fs-prev").onclick = () => {
        index = (index - 1 + images.length) % images.length;
        modalImg.src = images[index];
        renderThumbs();
      };
    
      document.getElementById("fs-next").onclick = () => {
        index = (index + 1) % images.length;
        modalImg.src = images[index];
        renderThumbs();
      };
    
      // Fechar
      document.getElementById("fs-close").onclick = closeModal;
      modal.addEventListener("click", (e) => {
        if (e.target === modal) closeModal();
      });
    
      function closeModal() {
        modal.classList.add("hidden");
        document.body.style.overflow = "auto";
      }
    
      // Teclado
      document.addEventListener("keydown", (e) => {
        if (modal.classList.contains("hidden")) return;
    
        if (e.key === "Escape") closeModal();
        if (e.key === "ArrowRight") document.getElementById("fs-next").click();
        if (e.key === "ArrowLeft") document.getElementById("fs-prev").click();
      });
    
      // Mobile swipe
      let startX = 0;
      modal.addEventListener("touchstart", (e) => (startX = e.touches[0].clientX));
      modal.addEventListener("touchend", (e) => {
        let endX = e.changedTouches[0].clientX;
        if (endX < startX - 50) document.getElementById("fs-next").click();
        if (endX > startX + 50) document.getElementById("fs-prev").click();
      });
    
    });
    </script>

  {% block extra_scripts %}{% endblock %}
</body>
</html>
