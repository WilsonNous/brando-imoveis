<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Servi√ßos | Brando Im√≥veis</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="/static/css/main.css" rel="stylesheet" />
</head>
<body class="bg-gray-50 text-gray-900">
  <header class="bg-brand text-white p-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">üõ†Ô∏è Painel de Servi√ßos - Brando Im√≥veis</h1>
    <a href="/admin" class="btn-outline">‚Üê Voltar ao painel principal</a>
  </header>

  <main class="max-w-7xl mx-auto p-6">
    <table class="min-w-full bg-white rounded-lg shadow text-sm">
      <thead class="bg-brand text-white">
        <tr>
          <th class="py-2 px-3">#</th>
          <th class="py-2 px-3">Cliente</th>
          <th class="py-2 px-3">Servi√ßo</th>
          <th class="py-2 px-3">Descri√ß√£o</th>
          <th class="py-2 px-3">Agendamento</th>
          <th class="py-2 px-3">Status</th>
          <th class="py-2 px-3">A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        {% for s in servicos %}
        <tr class="border-b hover:bg-gray-50">
          <td class="py-2 px-3">{{ s.id }}</td>
          <td class="py-2 px-3 font-semibold">{{ s.nome_cliente }}</td>
          <td class="py-2 px-3">{{ s.tipo_servico }}</td>
          <td class="py-2 px-3 text-gray-600">{{ s.descricao[:60] }}...</td>
          <td class="py-2 px-3">{{ s.data_agendamento.strftime('%d/%m/%Y') if s.data_agendamento else '-' }}</td>
          <td class="py-2 px-3">
            <span class="px-2 py-1 rounded text-white text-xs
              {% if s.status == 'pendente' %}bg-gray-400{% elif s.status == 'andamento' %}bg-yellow-500{% else %}bg-green-600{% endif %}">
              {{ s.status }}
            </span>
          </td>
          <td class="py-2 px-3">
            <form method="POST" action="/admin/servicos/update/{{ s.id }}" class="grid grid-cols-1 gap-1">
              <input name="responsavel" placeholder="Respons√°vel" value="{{ s.responsavel or '' }}" class="border p-1 rounded text-xs" />
              <input name="data_agendamento" type="date" value="{{ s.data_agendamento.strftime('%Y-%m-%d') if s.data_agendamento else '' }}" class="border p-1 rounded text-xs" />
              <input name="materiais" placeholder="Materiais" value="{{ s.materiais or '' }}" class="border p-1 rounded text-xs" />
              <input name="custo" placeholder="Custo" value="{{ s.custo or '' }}" class="border p-1 rounded text-xs" />
              <select name="status" class="border p-1 rounded text-xs">
                <option {% if s.status=='pendente' %}selected{% endif %}>pendente</option>
                <option {% if s.status=='andamento' %}selected{% endif %}>andamento</option>
                <option {% if s.status=='concluido' %}selected{% endif %}>concluido</option>
              </select>
              <button class="btn-brand text-xs py-1">Salvar</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </main>
</body>
</html>
